<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>音乐播放器</title>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<style>
:root{--accent:#00ffe4;--text:#ffffff;--blur:40px}
*{margin:0;padding:0;box-sizing:border-box}
body{display:flex;align-items:center;justify-content:center;min-height:100vh;background:radial-gradient(circle at 50% 50%,#111 0%,#000 100%);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;flex-direction:column;padding:20px}
.player{width:340px;background:#ffffff0a;border-radius:28px;padding:30px 20px 20px;backdrop-filter:blur(var(--blur));box-shadow:0 0 30px #00000080;text-align:center}
.cover{width:180px;height:180px;border-radius:16px;margin:0 auto 20px;display:block;object-fit:cover;box-shadow:0 8px 24px #000000aa;background:#ffffff10}
.title{font-size:20px;font-weight:600;margin-bottom:6px}
.artist{font-size:14px;color:#ffffff80;margin-bottom:24px}
.controls{display:flex;align-items:center;justify-content:center;gap:22px;margin-bottom:20px}
.controls button{background:none;border:none;color:var(--text);cursor:pointer;transition:transform .2s;font-size:18px}
.controls button:hover{transform:scale(1.1)}
.controls .play{width:54px;height:54px;border-radius:50%;background:var(--accent);color:#000;font-size:24px;display:flex;align-items:center;justify-content:center}
.progress{width:100%;height:4px;background:#ffffff20;border-radius:2px;overflow:hidden;margin-bottom:12px}
.bar{height:100%;width:0;background:var(--accent);transition:width .1s linear}
.time{display:flex;justify-content:space-between;font-size:12px;color:#ffffff80}
.playlist{width:340px;margin-top:16px;max-height:160px;overflow-y:auto;scrollbar-width:none;border-radius:16px;background:#ffffff0a;backdrop-filter:blur(var(--blur))}
.playlist::-webkit-scrollbar{display:none}
.playlist li{padding:10px 16px;border-bottom:1px solid #ffffff10;font-size:15px;cursor:pointer;transition:.2s;display:flex;align-items:center}
.playlist li:last-child{border-bottom:none}
.playlist li:hover{background:#ffffff14}
.playlist li.active{background:var(--accent);color:#000;font-weight:600}
</style>
</head>
<body>

<div class="player">
    <img id="cover" class="cover" src="https://www.dmoe.cc/random.php" alt="cover">
    <div id="title" class="title"></div>
    <div class="artist">旋律柔美</div>
    <div class="controls">
        <button id="prev">◀◀</button>
        <button class="play" id="play">▶</button>
        <button id="next">▶▶</button>
    </div>
    <div class="progress"><div class="bar" id="bar"></div></div>
    <div class="time"><span id="current">0:00</span><span id="total">0:00</span></div>
</div>

<ul id="list" class="playlist"></ul>

<audio id="audio"></audio>

<script>
const audio=document.getElementById('audio');
const playBtn=document.getElementById('play');
const prevBtn=document.getElementById('prev');
const nextBtn=document.getElementById('next');
const bar=document.getElementById('bar');
const currentTime=document.getElementById('current');
const totalTime=document.getElementById('total');
const title=document.getElementById('title');
const cover=document.getElementById('cover');
const list=document.getElementById('list');

const srcs=[
    'https://gh-proxy.com/https://raw.githubusercontent.com/rjdsq/rjdsq.github.io/main/music/若月亮还没来.mp3',
    'https://gh-proxy.com/https://raw.githubusercontent.com/rjdsq/rjdsq.github.io/main/music/时间是个小偷.mp3',
    'https://gh-proxy.com/https://raw.githubusercontent.com/rjdsq/rjdsq.github.io/main/music/落日.mp3',
    'https://gh-proxy.com/https://raw.githubusercontent.com/rjdsq/rjdsq.github.io/main/music/第57次取消发送铃声.mp3',
    'https://gh-proxy.com/raw.githubusercontent.com/rjdsq/ksx/main/music/赞美愚者.mp3'
];

let index=0;

function getName(url){
    return url.split('/').pop().replace('.mp3','');
}
function freshCover(){
    cover.src='https://www.dmoe.cc/random.php?'+Date.now();
}
function renderList(){
    list.innerHTML='';
    srcs.forEach((url,i)=>{
        const li=document.createElement('li');
        li.textContent=getName(url);
        li.dataset.idx=i;
        if(i===index) li.classList.add('active');
        li.addEventListener('click',()=>{
            index=i;
            loadTrack();
            play();
        });
        list.appendChild(li);
    });
}
function loadTrack(){
    audio.src=srcs[index];
    title.textContent=getName(srcs[index]);
    audio.load();
    audio.onloadedmetadata=()=>totalTime.textContent=formatTime(audio.duration);
    renderList();
    freshCover();
}
function formatTime(sec){
    const m=Math.floor(sec/60);
    const s=Math.floor(sec%60).toString().padStart(2,'0');
    return `${m}:${s}`;
}
function play(){
    audio.play();
    playBtn.innerHTML='❚❚';
}
function pause(){
    audio.pause();
    playBtn.innerHTML='▶';
}
playBtn.onclick=()=>audio.paused?play():pause();
prevBtn.onclick=()=>{index=(index-1+srcs.length)%srcs.length;loadTrack();play();}
nextBtn.onclick=()=>{index=(index+1)%srcs.length;loadTrack();play();}
audio.ontimeupdate=()=>{
    bar.style.width=(audio.currentTime/audio.duration)*100+'%';
    currentTime.textContent=formatTime(audio.currentTime);
}
audio.onended=nextBtn.onclick;
loadTrack();
</script>
</body>
</html>
